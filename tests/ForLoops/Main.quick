struct Iterable
{
    index Int;

    func Next(me *var Iterable) Bool
    {
        me.index += 1;

        return me.index <= 10;
    }

    func GetCurrent(me *val Iterable) Int
    {
        return me.index;
    }
}

// struct NonIterable
// {
//     index Int;
//
//     func Next(me *var NonIterable, a Int) Bool
//     {
//         me.index += 1;
//
//         return me.index <= 10;
//     }
//
//     func GetCurrent(me *val NonIterable) Int
//     {
//         return me.index;
//     }
// }

func Main() Int
{
    for (val i of 0 < "hello".count)
    {
        Console.WriteChar("hello".Get(i));
    }

    Console.WriteLine("\n");

    for (val char in "hello")
    {
        Console.WriteChar(char);
        Console.WriteLine("");
    }

    Console.WriteLine("");

    for (val string in ["hello", "world", "hi", "ok", "bye"])
    {
        for (val char in string)
        {
            Console.WriteChar(char);
        }

        Console.WriteLine("");
    }

    Console.WriteLine("");

    var iterable1 = Iterable { index = 0 };

    for (var a in iterable1)
    {
        val string = scope String.Create();
        string.PushSpan("Iterable1: ");
        string.PushInt(a);

        Console.WriteLine(string.ToSpan());
    }

    var iterable2 = Iterable { index = 0 };

    Console.WriteLine("");

    while (iterable2.Next())
    {
        val a = iterable2.GetCurrent();

        val string = scope String.Create();
        string.PushSpan("Iterable2: ");
        string.PushInt(a);

        Console.WriteLine(string.ToSpan());
    }

    return 0;
}